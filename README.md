# Virt_stage_Pereval
Проект Виртуальной стажировки

Когда турист поднимется на перевал, он сфотографирует его и внесёт нужную информацию с помощью мобильного приложения:

координаты объекта и его высоту;
название объекта;
несколько фотографий;
информацию о пользователе, который передал данные о перевале:
имя пользователя (ФИО строкой);
почта;
телефон.

После этого турист нажмёт кнопку «Отправить» в мобильном приложении. Мобильное приложение вызовет метод submitData.

Описание метода:

Метод POST /submitData/
Метод принимает JSON в теле запроса с информацией о перевале. Ниже находится пример такого JSON-а:
```JSON
{
  "beauty_title": "пер. ",
  "title": "Пхия",
  "other_titles": "Триев",
  "connect": "", // что соединяет, текстовое поле
 
  "add_time": "2021-09-22 13:18:13",
  "user": {"email": "qwerty@mail.ru", 		
        "fam": "Пупкин",
		 "name": "Василий",
		 "otc": "Иванович",
        "phone": "+7 555 55 55"}, 
 
   "coords":{
  "latitude": "45.3842",
  "longitude": "7.1525",
  "height": "1200"}
 
 
  level:{"winter": "", //Категория трудности. В разное время года перевал может иметь разную категорию трудности
  "summer": "1А",
  "autumn": "1А",
  "spring": ""},
 
   images: [{data:"<картинка1>", title:"Седловина"}, {data:"<картинка>", title:"Подъём"}]
}
```

Результат метода: 
status — код HTTP, целое число:
500 — ошибка при выполнении операции;
400 — Bad Request (при нехватке полей);
200 — успех.

Сообщение:
Причина ошибки (если она была);
Отправлено успешно;
Если отправка успешна, дополнительно возвращается id вставленной записи.
id — идентификатор, который был присвоен объекту при добавлении в базу данных.

Примеры:

{ "status": 500, "message": "Ошибка подключения к базе данных","id": null}
{ "status": 200, "message": null, "id": 42 }

Метод GET /submitData/
Этот метод получает одну запись (перевал) по её id с выведением всей информацию об перевале, в том числе статус модерации.

Возвращает состояние(state) как результат редактирования

Метод PATCH /submitData/
Позволяет отредактировать существующую запись (замена), если она в статусе `new`. При этом редактировать можно все поля, кроме ФИО, адреса почты и номера телефона.

Возвращает состояние(state) как результат редактирования

```
1 — если успешно удалось отредактировать запись в базе данных.
0 — отредактировать запись не удалось.
```
<h4>Примеры JSON-ответов:</h4>

```
HTTP 200 OK
Allow: GET, PATCH, HEAD, OPTIONS
Content-Type: application/json
Vary: Accept
{
    "state": 1,
    "message": "Данные успешно отредактированы"
}
```